{"version":3,"sources":["../../../../../../assets/Script/Game/Controller/assets/Script/Game/Controller/MenuController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/Game/Controller","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\nimport Platform from \"../Platform/Platform\"\n\n@ccclass\nexport default class MenuController extends cc.Component {\n\n    @property(cc.Prefab)\n    localDataManager = null;\n    @property(cc.Prefab)\n    userManager = null;\n    user = null;\n\n    @property(cc.Label)\n    lvLabel = null;\n    @property(cc.ProgressBar)\n    progress = null;\n    @property(cc.Sprite)\n    bar = null;\n    @property(cc.Label)\n    powerLabel = null;\n    @property(cc.Label)\n    moneyLabel = null;\n\n    localData = null;\n    rankData = null;\n\n    onLoad() {\n        this.user = cc.instantiate(this.userManager).getComponent('UserManager');\n\n        Platform.getUserInfo((error, data) => {\n            if (error == null && data.userInfo != undefined) {\n                const userInfo = data.userInfo;\n                this.user.setUserInfo([userInfo.nickName, userInfo.avatarUrl]);\n            }\n        })\n        Platform.init();\n        // this.localData = cc.instantiate(this.localDataManager).getComponent('LocalDataManager');\n        // this.localData.parseRank(this.getLvAndScroe, this);\n        this.getLvAndScroe();\n    }\n\n    start() {\n\n    }\n\n    getLvAndScroe() {\n        // this.rankData = this.localData.rankData;\n\n        var lv = this.user.getLv();\n        var progress = this.user.getProgress();\n        var power = this.user.getPower();\n        var money = this.user.getMoney();\n\n        //初始化新手引导，\n        //两步必须都完成，否则重置到最初阶段\n        // if (!this.user.getIsShowGuide0() || !this.user.getIsShowGuide1()) {\n        //     this.user.initGuide();\n        // }\n\n        // var rank = this.rankData[lv];\n        // var rank_arr = rank.split(',');\n        // if (rank_arr.length >= 2) {\n        //     var s = \"\";\n        //     if (score < 60) {\n        //         s = \"学渣\";\n        //     } else if (60 <= score && score < 90) {\n        //         s = \"学霸\";\n        //     } else {\n        //         s = \"学神\";\n        //     }\n        //     this.lvLabel.string = rank_arr[1] + \"  \" + s;\n        // }\n        // this.scoreLabel.string = score;\n        // this.scoreLabel.active = false;\n\n        this.lvLabel.string = lv;\n        let progressBar = this.progress.getComponent(cc.ProgressBar);\n        if (progress > 0.9) {\n            this.bar.type = cc.Sprite.Type.SLICED;\n        } else {\n            this.bar.type = cc.Sprite.Type.TILED;\n        }\n        progressBar.progress = progress;\n        this.powerLabel.string = power;\n        this.moneyLabel.string = money;\n    }\n\n    addPowerAction() {\n        this.addPower();\n    }\n\n    beginAction() {\n        cc.director.loadScene(\"PlayScene\");\n    }\n\n    rankAction() {\n        cc.director.loadScene('RankScene');\n    }\n\n    shareAction() {\n        this.addPower();\n    }\n\n    addPower() {\n        var self = this;\n        Platform.share(0, () => {\n            var power = parseInt(self.user.getPower());\n            power += 2;\n            self.user.setPower(power);\n            self.powerLabel.string = power;\n        });\n    }\n    // update (dt) {}\n}\n"]}